### nacos和eureka对比



#### **相同的地方如下**

![nacos和eureka相同](E:\笔记整理\微服务技术\图解\nacos和eureka相同.png)



#### **不同的地方**



#### 1：对于提供者

**在nacos里面，对于服务提供者，nacos把它们分为临时实例和非临时实例**

**对于临时实例：采用心跳检测，跟eureka一样，如果宕机，则直接剔除**

**对于非临时实例：nacos主动询问，不会采用心跳检测，如果宕机，也不会直接剔除**





#### 2：对于消费者

**eureka采用定时拉取，30s拉取一次，但是30s内有服务宕机，就感知不到，实时性较差**

**nacos采用的是定时拉取加上主动推送，在定时的基础上，有服务宕机，立即推送信息**



![nacos和eureka不同处](E:\笔记整理\微服务技术\图解\nacos和eureka不同处.png)





#### 设置nacos是否为临时实例

```xml
  cloud:
    nacos:
      server-addr: localhost:8848
      discovery:
        cluster-name: CD  #集群名称
        ephemeral: false  #默认是临时，改为非临时
```

**测试：临时实例的时候，关闭服务，需要等待一段时间才会检测到服务宕机，检测到了之后就剔除了**

**测试：非临时实例，关闭服务，立刻感知，检测到了之后，不被删除，等待服务重启，可以手动剔除**



**1.Nacos与eureka的共同点**

**①都支持服务注册和服务拉取**

**②都支持服务提供者心跳方式做健康检测**



**2.Nacos与Eureka的区别**

**①Nacos支持服务端主动检测提供者状态：临时实例采用心跳模式，非临时实例采用主动检测模式**

**②临时实例心跳不正常会被剔除，非临时实例则不会被剔除**

**③Nacos支持服务列表变更的消息推送模式，服务列表更新更及时**

**④Nacos集群默认采用AP方式，当集群中存在非临时实例时，采用CP模式；Eureka采用AP方式**