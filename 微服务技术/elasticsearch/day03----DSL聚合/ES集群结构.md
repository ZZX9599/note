### ES集群结构



单机的elasticsearch做数据存储，必然面临两个问题：海量数据存储问题、单点故障问题。

•海量数据存储问题：将索引库从逻辑上拆分为N个分片（shard），存储到多个节点

•单点故障问题：将分片数据在不同节点备份（replica ）



**解决海量数据存储问题：**

![shuju](E:\笔记整理\微服务技术\图解\DSL对应关系\shuju.png)



**把一个es的数据，存放到多个节点上面去，解决了海量数据存储不下的问题**

**但是还没有解决单点故障问题**

**所以我们需要做备份**

![单点故障](E:\笔记整理\微服务技术\图解\DSL对应关系\单点故障.png)

**这样把数据互相的备份，注意：不能自己节点备份自己**

**这样即使node1宕机，另外的两台都依然是完整数据**