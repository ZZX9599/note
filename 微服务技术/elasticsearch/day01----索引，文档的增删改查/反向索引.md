### 反向索引



![传统数据库正向索引](E:\笔记整理\微服务技术\图解\传统数据库正向索引.png)

**搜素商品包含手机的   like  %手机%   **

**%手机   索引失效**

**手机%  索引不失效**

**%手机%  索引失效**

**索引失效了，一条一条的查询数据，效率很低下**



#### 倒排索引

![倒排索引](E:\笔记整理\微服务技术\图解\倒排索引.png)



**什么是文档，一条记录就是一个文档**

**也就是，先根据文档的内容进行分词，然后把分词的内容存进词条，存储对应的文档id**

**当搜素的时候，对词条加上索引，先查询对应的词条，拿到对应的id**

**把所有的结果汇总起来，得到所有可能的文档**

**再去文档里根据id查询【id有索引】，这个时候就可以查出所有的内容了**



**快在哪里？**

**两次都走了索引，并不是像之前那样索引失效，一个一个的找，倒排索引都走了索引，所以快很多**



**为什么叫做倒排索引？**

**正向索引是在所有的文档里面找内容，依次比对**

**反向索引是先查询内容，再去文档里面比对**

**是相反的，故称作为倒排索引**



**什么是文档和词条？**

**•每一条数据就是一个文档**

**•对文档中的内容分词，得到的词语就是词条**



**什么是正向索引？**

**•基于文档id创建索引。查询词条时必须先找到文档，而后判断是否包含词条**



**什么是倒排索引？**

**•对文档内容分词，对词条创建索引，并记录词条所在文档的信息。查询时先根据词条查询到文档id，而后获取到文档**