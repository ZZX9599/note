### 服务雪崩



![服务雪崩](E:\笔记整理\动力节点SpringCloud\图解\服务雪崩.png)





**本质：就是线程无法及时的回收回来，用户把线程占用了**



**在高并发的情况下，再访问A,B，有10000个请求**

**假设Tomcat并发量为5000，就会有95000个报错503【服务不可用】，剩下的500个就一直在转**

**在分布式的链路中，只要有一个服务宕机，就可能整个瘫痪，这就是服务雪崩**



#### 服务雪崩怎么解决

**1：修改调用的超时时长（不推荐）**

**将服务间的调用超时时长改小，这样就可以让线程及时回收，保证服务可用 **

**优点：非常简单，也可以有效的解决服务雪崩 **

**缺点：不够灵活，有的服务需要更长的时间去处理（写库，整理数据）**

**很多正常的服务报超时，而且对代码性能要求太高，不易实现**



**2：直接判断消费者状态，若宕机，立刻通知消费者，消费者直接return**

**优点：可以有效缓解雪崩**

**缺点：无法完成业务**



**实际开发中，服务宕机很正常，我们要做好应对方案**