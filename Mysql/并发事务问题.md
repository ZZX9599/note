### 并发事务问题

**三个并发事务的现象**



**1). 赃读：一个事务读到另外一个事务还没有提交的数据**

**比如B读取到了A未提交的数据**

**A事务读取到B事务还没提交的数据**



**2).不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读**

**事务A两次读取同一条记录，但是读取到的数据却是不一样的。**

**A事务读取一个数据，B事务在这个时候提交了事务，A再读取的时候，两次不一致**



**3). 幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时**

**又发现这行数据 已经存在，好像出现了 "幻影"。**

**A事务查询这个表，没有，准备创建，B事务这个时候创建了这个表，A在创建的时候提示表已经存在**



#### **为了解决并发事务所引发的问题，在数据库中引入了事务隔离级别。主要有以下几种：**

```xml
隔离级别                    脏读                     不可重复读                      幻读
Read uncommitted           √                          √                            √
Read committed             ×                          √                            √
Repeatable Read(默认)       ×                          ×                            √
Serializable               ×                          ×                            ×

```

**1：查看事务隔离级别** 

```xml
SELECT @@TRANSACTION_ISOLATION;
```

**2：设置事务隔离级别** 

```xml
SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL { READ UNCOMMITTED |
READ COMMITTED | REPEATABLE READ | SERIALIZABLE }
```

**注意：事务隔离级别越高，数据越安全，但是性能越低**。 