### Mysql存储引擎

**是mysql数据库的核心，我们也需要在合适的场景选择合适的存储引 擎**

**存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式 **

**存储引擎是基于表的，而不是基于库的，因为存储数据是以表存储的，所以存储引擎也可被称为表类型**

**我们可以在创建表的时候，来指定选择的存储引擎，如果 没有指定将自动选择默认的存储引擎。**



**1). 建表时指定存储引擎**

```sql
CREATE TABLE 表名(
	字段1 字段1类型 [ COMMENT 字段1注释 ] ,
	......
	字段n 字段n类型 [COMMENT 字段n注释 ]
) ENGINE = INNODB [ COMMENT 表注释 ] ;
```



**2). 查询当前数据库支持的存储引擎**

```sql
show engines;
查询出来是 InnoDB

特点是：
Supports transactions, row-level locking, and foreign keys
```



**查询建表语句 --- 默认存储引擎: InnoDB**

```sql
show create table account;
```

**我们可以看到，创建表时，即使我们没有指定存储疫情，数据库也会自动选择默认的存储引擎。**





#### 存储引擎特点



#### **InnoDB **

**介绍：InnoDB是一种兼顾高可靠性和高性能的通用存储引擎**

**在 MySQL 5.5 之后，InnoDB是默认的 MySQL 存储引擎。**



**特点 **

**DML【专门增删改查】遵循ACID模型**

**支持事务； 行级锁，提高并发访问性能； 支持外键FOREIGN KEY约束，保证数据的完整性和正确性；**



**文件 **

**xxx.ibd：xxx代表的是表名**

**innoDB引擎的每张表都会对应这样一个表空间文件**

**存储该表的表结构，数据和索引。**



**InnoDB的逻辑储存结构**

**表空间 : InnoDB逻辑结构的最高层，ibd文件其实就是表空间文件，在表空间中可以包含多个Segment段**



**段 : 表空间是由各个段组成的， 常见的段有数据段、索引段、回滚段等。InnoDB中对于段的管理，都是引擎自身完成，不需要人为对其控制，一个段中包含多个区。**



**区 : 区是表空间的单元结构，每个区的大小为1M。 默认情况下， InnoDB存储引擎页大小为 16K， 即一个区中一共有64个连续的页。**



**页 : 页是组成区的最小单元，页也是InnoDB 存储引擎磁盘管理的最小单元，每个页的大小默 认为 16KB。为了保证页的连续性，InnoDB 存储引擎每次从磁盘申请 4-5 个区。**



**行 : InnoDB 存储引擎是面向行的，也就是说数据是按行进行存放的，在每一行中除了定义表时 所指定的字段以外，还包含两个隐藏字段**



**所以是   表空间【idb】--->多个段--->多个区---->多个页--->多个行**





#### MyISAM

**介绍：MyISAM是MySQL早期的默认存储引擎**



**特点 不支持事务，不支持外键，支持表锁，不支持行锁 访问速度快**



**文件   xxx.sdi：存储表结构信息    xxx.MYD: 存储数据    xxx.MYI: 存储索引**





#### Memory

**介绍：Memory引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响**

**只能将这些表作为 临时表或缓存使用。**



**特点：内存存放 hash索引（默认）**



**文件：xxx.sdi：存储表结构信息**



#### **区别及特点**



![QQ截图20220506203953](E:\笔记整理\Mysql\图片\QQ截图20220506203953.png)





**面试题: InnoDB引擎与MyISAM引擎的区别 ? **

**①. InnoDB引擎, 支持事务, 而MyISAM不支持。 **

**②. InnoDB引擎, 支持行锁和表锁, 而MyISAM仅支持表锁, 不支持行锁。 **

**③. InnoDB引擎, 支持外键, 而MyISAM是不支持的。**

**实际上就是InnoDb的特点  支持事务，行级锁，外键**